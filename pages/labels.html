<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generador de Etiquetas - SIBIMTZOMP</title>
    <link rel="stylesheet" href="../css/futuristic.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        .label-container {
            background: white;
            color: black;
            width: 400px;
            height: 200px;
            border: 2px dashed #333;
            display: grid;
            grid-template-columns: 1fr 120px;
            padding: 15px;
            border-radius: 5px;
            margin: 20px auto;
            font-family: Arial, sans-serif;
        }

        .label-info {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .label-title {
            font-size: 1.2rem;
            font-weight: bold;
            text-transform: uppercase;
        }

        .label-code {
            font-size: 1rem;
            margin-top: 5px;
        }

        .label-footer {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: auto;
        }

        .label-footer img {
            height: 50px;
        }

        .label-footer-text {
            font-size: 0.8rem;
            font-weight: bold;
            line-height: 1;
        }

        .qr-box {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        @media print {
            body * {
                visibility: hidden;
            }

            .label-container,
            .label-container * {
                visibility: visible;
            }

            .label-container {
                position: absolute;
                left: 0;
                top: 0;
                margin: 0;
                border: none;
            }

            .no-print {
                display: none;
            }
        }
    </style>
</head>

<body>
    <header>
        <div class="logo">SIBIMTZOMP</div>
        <div style="display: flex; align-items: center; gap: 20px;">
            <a href="../index.html" class="btn btn-outline" style="padding: 8px 15px;">Volver</a>
        </div>
    </header>

    <main style="padding: 40px 5%;">
        <div class="glass fade-in" style="padding: 30px; max-width: 800px; margin: 0 auto;">
            <h2>Generador de Etiquetas</h2>
            <div class="no-print" style="margin: 20px 0; display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div>
                    <label style="display: block; margin-bottom: 8px;">Descripci贸n del Bien</label>
                    <input type="text" id="input-desc" class="glass" placeholder="Ej: REFRIGERADOR ATVIOAT-6"
                        style="width: 100%; padding: 10px; color: white;">
                </div>
                <div>
                    <label style="display: block; margin-bottom: 8px;">C贸digo de Inventario</label>
                    <input type="text" id="input-code" class="glass" placeholder="Ej: 5191-0001"
                        style="width: 100%; padding: 10px; color: white;">
                </div>
                <button onclick="generateLabel()" class="btn btn-primary" style="grid-column: span 2;">Generar
                    Etiqueta</button>
            </div>

            <hr style="border: 0; border-top: 1px solid var(--glass-border); margin: 30px 0;">

            <div id="label-result" class="label-container" style="display: none;">
                <div class="label-info">
                    <div>
                        <div id="display-desc" class="label-title">REFRIGERADOR ATVIOAT-6</div>
                        <div id="display-code" class="label-code">C贸digo: 5191-0001</div>
                    </div>
                    <div class="label-footer">
                        <img src="../assets/images/logo_municipio.png">
                        <div class="label-footer-text">
                            GOBIERNO<br>MUNICIPAL<br>2024 - 2027
                        </div>
                    </div>
                </div>
                <div id="qr-code" class="qr-box"></div>
            </div>

            <button onclick="window.print()" id="print-btn" class="btn btn-outline"
                style="display: none; margin: 20px auto;">Imprimir Etiqueta</button>
        </div>
    </main>

    <script>
        function generateLabel() {
            const desc = document.getElementById('input-desc').value;
            const code = document.getElementById('input-code').value;

            if (!desc || !code) return alert('Por favor llene ambos campos');

            document.getElementById('display-desc').innerText = desc;
            document.getElementById('display-code').innerText = 'C贸digo: ' + code;

            // Clear previous QR
            document.getElementById('qr-code').innerHTML = '';

            // Generate QR
            new QRCode(document.getElementById("qr-code"), {
                text: code,
                width: 100,
                height: 100,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });

            document.getElementById('label-result').style.display = 'grid';
            document.getElementById('print-btn').style.display = 'flex';
        }
    </script>
</body>

</html>